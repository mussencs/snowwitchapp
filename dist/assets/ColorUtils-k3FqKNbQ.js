import{n as b,k as w,o as q,r as R,s as p,q as S,g as v,p as J,m as K,h as P,t as Q,v as U,w as X}from"./Utils-v1apRgsN.js";const T="random",C="mid",I=new Map;function Y(e){for(const[,c]of I)if(e.startsWith(c.stringPrefix))return c.parseString(e);const n=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,s=e.replace(n,(c,M,u,o,a)=>M+M+u+u+o+o+(a!==void 0?a+a:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,i=r.exec(s),t=16;return i?{a:i[4]!==void 0?parseInt(i[4],t)/255:1,b:parseInt(i[3],t),g:parseInt(i[2],t),r:parseInt(i[1],t)}:void 0}function L(e,n,s=!0){if(!e)return;const r=b(e)?{value:e}:e;if(b(r.value))return W(r.value,n,s);if(w(r.value))return L({value:q(r.value,n,s)});for(const[,i]of I){const t=i.handleRangeColor(r);if(t)return t}}function W(e,n,s=!0){if(!e)return;const r=b(e)?{value:e}:e;if(b(r.value))return r.value===T?_():V(r.value);if(w(r.value))return W({value:q(r.value,n,s)});for(const[,i]of I){const t=i.handleColor(r);if(t)return t}}function te(e,n,s=!0){const r=L(e,n,s);return r?Z(r):void 0}function Z(e){const u=e.r/255,o=e.g/255,a=e.b/255,l=Math.max(u,o,a),g=Math.min(u,o,a),f={h:0,l:(l+g)*.5,s:0};return l!==g&&(f.s=f.l<.5?(l-g)/(l+g):(l-g)/(2-l-g),f.h=u===l?(o-a)/(l-g):f.h=o===l?2+(a-u)/(l-g):2*2+(u-o)/(l-g)),f.l*=100,f.s*=100,f.h*=60,f.h<0&&(f.h+=360),f.h>=360&&(f.h-=360),f}function V(e){return Y(e)}function N(e){const x=(e.h%360+360)%360,y=Math.max(0,Math.min(100,e.s)),c=Math.max(0,Math.min(100,e.l)),M=x/360,u=y/100,o=c/100,a=255,l=3;if(y===0){const h=Math.round(o*a);return{r:h,g:h,b:h}}const g=.5,f=2,F=(h,D,m)=>{if(m<0&&m++,m>1&&m--,m*6<1)return h+(D-h)*6*m;if(m*f<1)return D;if(m*l<1*f){const G=f/l;return h+(D-h)*(G-m)*6}return h},j=1,d=o<g?o*(j+u):o+u-o*u,$=f*o-d,z=1,k=z/l,A=Math.min(a,a*F($,d,M+k)),B=Math.min(a,a*F($,d,M)),E=Math.min(a,a*F($,d,M-k));return{r:Math.round(A),g:Math.round(B),b:Math.round(E)}}function _(e){const s=e??0,r=256;return{b:Math.floor(R(p(s,r))),g:Math.floor(R(p(s,r))),r:Math.floor(R(p(s,r)))}}function ae(e,n){return`rgba(${e.r}, ${e.g}, ${e.b}, ${n??1})`}function le(e,n){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${n??1})`}function ee(e,n,s,r){let i=e,t=n;return i.r===void 0&&(i=N(e)),t.r===void 0&&(t=N(n)),{b:S(i.b,t.b,s,r),g:S(i.g,t.g,s,r),r:S(i.r,t.r,s,r)}}function oe(e,n,s){if(s===T)return _();if(s===C){const r=e.getFillColor()??e.getStrokeColor(),i=(n==null?void 0:n.getFillColor())??(n==null?void 0:n.getStrokeColor());if(r&&i&&n)return ee(r,i,e.getRadius(),n.getRadius());{const t=r??i;if(t)return N(t)}}else return s}function fe(e,n,s){const r=b(e)?e:e.value;return r===T?s?L({value:r}):n?T:C:r===C?C:L({value:r})}function ue(e,n,s){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return n&&(O(r.h,n.h,s),O(r.s,n.s,s),O(r.l,n.l,s)),r}function O(e,n,s){e.enable=n.enable;const r=0,i=1,t=0,x=0;e.enable?(e.velocity=v(n.speed)/J*s,e.decay=i-v(n.decay),e.status="increasing",e.loops=t,e.maxLoops=v(n.count),e.time=x,e.delayTime=v(n.delay)*K,n.sync||(e.velocity*=P(),e.value*=P()),e.initialValue=e.value,e.offset=p(n.offset)):e.velocity=r}function H(e,n,s,r){if(!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=r.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const u=e.offset?R(e.offset):0,o=(e.velocity??0)*r.factor+u*3.6,a=e.decay??1,l=Q(n),g=U(n);!s||e.status==="increasing"?(e.value+=o,e.value>l&&(e.loops||(e.loops=0),e.loops++,s?e.status="decreasing":e.value-=l)):(e.value-=o,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing")),e.velocity&&a!==1&&(e.velocity*=a),e.value=X(e.value,g,l)}function ge(e,n){if(!e)return;const{h:s,s:r,l:i}=e,t={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};s&&H(s,t.h,!1,n),r&&H(r,t.s,!0,n),i&&H(i,t.l,!0,n)}export{Z as a,ae as b,ee as c,fe as d,oe as e,L as f,le as g,ue as h,te as r,ge as u};
